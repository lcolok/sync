<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="referrer" content="never" />
  <meta name="referrer" content="no-referrer" />
  <link rel="shortcut icon" href="https://uploader.shimo.im/f/xNTnWjbfgksiTeda.png">
  <link rel='apple-touch-icon' href='addIcon/assets/UploadCloud.jpg'>
  <title>石墨床</title>
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons'>
  <link rel="stylesheet" href="//cdn.materialdesignicons.com/3.4.93/css/materialdesignicons.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
    integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
  <!-- icon CDN -->
  <link rel='stylesheet' href='https://unpkg.com/vuetify/dist/vuetify.min.css'>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dplayer/1.25.0/DPlayer.min.css">

  <link rel="stylesheet" href="css/style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
  <!-- 以上这句代码用于适配手机 -->
</head>

<body>





  <v-flex id="app" v-if='user' v-cloak v-on:keydown.esc='bottomSheet=bottomSheet?false:true' v-resize="onResize">


    <v-app id="sandbox" :dark="dark">

      <v-snackbar ref="snackbar" bottom v-model="snackbar.show" :color="snackbar.color">

        <v-icon color="white">{{ snackbar.snackbarIcon }}</v-icon>
        <div class="transparent" flat :ripple="snackbar.ripple" @click="snackbar.action">
          {{ snackbar.snackbarText }}
        </div>
        <v-btn icon dark flat @click="snackbar.show = false">
          <v-icon color="white">close</v-icon>
        </v-btn>

      </v-snackbar>


      <v-navigation-drawer v-model="primaryDrawer.model" :permanent="primaryDrawer.type === 'permanent'"
        :temporary="primaryDrawer.type === 'temporary'" :clipped="primaryDrawer.clipped"
        :floating="primaryDrawer.floating" :mini-variant="primaryDrawer.mini" absolute overflow app>
      </v-navigation-drawer>

      <!-- <v-toolbar :clipped-left="primaryDrawer.clipped" app scroll-toolbar-off-screen scroll-threshold=50 tabs >
        <v-toolbar-side-icon v-if="primaryDrawer.type !== 'permanent'"
          @click.stop="primaryDrawer.model = !primaryDrawer.model"></v-toolbar-side-icon>
        <v-toolbar-title>石墨床VUE</v-toolbar-title>
      </v-toolbar> -->

      <v-toolbar color="primary" :dark="!dark" dense extension-height=70 app scroll-off-screen fixed>
        <v-toolbar-side-icon v-if="primaryDrawer.type !== 'permanent'"
          @click.stop="primaryDrawer.model = !primaryDrawer.model"></v-toolbar-side-icon>
        <v-toolbar-title>石墨床VUE</v-toolbar-title>

        <v-spacer></v-spacer>


        <v-btn icon>
          <v-icon>refresh</v-icon>
        </v-btn>

        <v-menu bottom left transition="slide-y-transition">
          <v-btn slot="activator" dark icon>
            <v-icon>more_vert</v-icon>
          </v-btn>

          <v-list>
            <v-list-tile v-for="(item, i) in generalMenu" :key="i" @click="item.action">
              <v-list-tile-avatar>
                <v-icon>{{ item.icon }}</v-icon>
              </v-list-tile-avatar>
              <v-list-tile-title>
                {{ item.text }}
              </v-list-tile-title>
            </v-list-tile>
          </v-list>
        </v-menu>

        <!-- <v-toolbar color="primary" :dark="!dark" slot="extension" flat>

          <v-btn-toggle v-model="toggle_multiple" class="transparent" multiple >
              <v-btn flat>
                <v-icon>format_bold</v-icon>
              </v-btn>
              <v-btn flat>
                <v-icon>format_italic</v-icon>
              </v-btn>
              <v-btn flat>
                <v-icon>format_underlined</v-icon>
              </v-btn>
              <v-btn flat>
                <v-icon>format_color_fill</v-icon>
              </v-btn>
            </v-btn-toggle>
        </v-toolbar> -->

        <v-layout align-space-around justify-center row slot="extension" />

        <!--         <v-flex xs5 lg2 mr-2>
          <v-select solo-inverted v-model="searchType.value" :items="searchType.items" label="全部" multiple>
            <template slot="selection" slot-scope="{ item, index }">
              <v-chip v-if="index === 0" color="white" class="caption" text-color="primary">

                <v-icon class="hidden-sm-and-down">find_in_page</v-icon>

                {{ searchRange }}
              </v-chip>
            </template>
          </v-select>
        </v-flex> -->

        <v-flex>
          <form action="javascript:return true">

            <v-text-field solo-inverted ref="searchBar" id="searchBar" v-model="keyword" label="搜索"
              prepend-inner-icon="search" :append-icon="paste ? 'file_copy' : undefined"
              @click:append="pasteFromClipboard" clearable autofocus @keydown="submit($event)" loading hint="随便搜点什么吧..."
              :rules="[]">

              <v-progress-linear v-if="custom" slot="progress" height="3"></v-progress-linear>

            </v-text-field>

          </form>
        </v-flex>



        </v-layout>
      </v-toolbar>
      </form>



      <v-fab-transition>
        <v-btn color="white" dark fab fixed bottom left tile v-show='floatPlayBTN_Occur' @click="bottomSheet=true">
          <!-- <v-icon>keyboard_arrow_up</v-icon> -->
          <img src='https://uploader.shimo.im/f/xNTnWjbfgksiTeda.png' width='40' height='40'>
        </v-btn>
      </v-fab-transition>


      <v-dialog v-model='bottomSheet' ref='bottomSheet' fullscreen hide-overlay transition="dialog-bottom-transition"
        scrollable>
        <v-card tile>
          <v-toolbar dense card dark color="primary">
            <v-btn icon dark @click="bottomSheet = false;">
              <v-icon>close</v-icon>
            </v-btn>
            <v-toolbar-title>预览</v-toolbar-title>
            <v-spacer></v-spacer>
            <v-toolbar-items>
              <!-- <v-btn dark flat @click="bottomSheet = false">Save</v-btn> -->
            </v-toolbar-items>
            <v-menu bottom right transition="slide-y-transition">
              <v-btn slot="activator" dark icon>
                <v-icon>more_vert</v-icon>
              </v-btn>
              <v-list>
                <v-list-tile v-for="(item, i) in generalMenu" :key="i" @click="item.action">
                  <v-list-tile-avatar>
                    <v-icon>{{ item.icon }}</v-icon>
                  </v-list-tile-avatar>
                  <v-list-tile-title>
                    {{ item.text }}
                  </v-list-tile-title>
                </v-list-tile>
              </v-list>
            </v-menu>
          </v-toolbar>

          <v-img id="dplayer" src="" poster="" controls="" playsinline="" loop="" :max-height='videoView.height'
            :max-width='videoView.width' x5-video-player-type="h5" x5-video-player-fullscreen="true" v-touch="{
              down:()=>{bottomSheet=false},
            }"></v-img>


          <!-- <v-progress-linear :value="50" class="my-0" height="3"></v-progress-linear> -->


          <v-list dense two-line>

            <v-list-tile ripple @click='expandPanel'>
              <v-list-tile-content>

                <v-list-tile-title class="font-weight-bold subheading">{{ currentVideo.attributes.name }}
                </v-list-tile-title>

                <v-list-tile-sub-title class="caption font-weight-regular text--gray">
                  {{ currentVideo.attributes.name_trans }}
                </v-list-tile-sub-title>
                <v-list-tile-sub-title class="caption font-weight-light">
                  {{ this.renderSize(currentVideo.attributes.size) }}</v-list-tile-sub-title>
                <v-divider></v-divider>

              </v-list-tile-content>




              <v-list-tile-action>
                <v-btn icon flat :ripple='false'>
                  <v-icon :style="style" color="grey darken-2" small>fas fa-caret-down</v-icon>
                </v-btn>
              </v-list-tile-action>
            </v-list-tile>


            <v-list-tile>
              <v-toolbar flat class='transparent'>
                <v-layout align-center justify-space-between row fill-height />

                <div class="text-xs-center" v-for="x in bottomSheetToolbar" v-if='x.showInSheet'
                  :key='bottomSheetToolbar.text'>
                  <v-btn flat fab @click="x.action(currentVideo,$event);" :id='x.text'>
                    <v-flex class='caption'>
                      <v-layout align-center justify-center column fill-height />
                      <v-icon size=20>{{x.icon}}</v-icon>{{x.text}}
                    </v-flex>
                  </v-btn>
                </div>

                <div class="text-xs-center">
                  <v-menu bottom left offset-y>
                    <v-btn slot="activator" flat fab @click="moreBTN.action($event);" :id='moreBTN.text'>
                      <v-flex class='caption'>
                        <v-layout align-center justify-center column fill-height />
                        <v-icon size=20>{{moreBTN.icon}}</v-icon>{{moreBTN.text}}
                      </v-flex>
                    </v-btn>


                    <v-list>
                      <template v-for="(menuItem, i) in bottomSheetToolbar" v-if='!menuItem.showInSheet'>
                        <v-subheader v-if='menuItem.subheader' class='caption'>{{ menuItem.subheader}}</v-subheader>
                        <v-divider v-if='menuItem.subheader' class="mx-3"></v-divider>
                        <v-list-tile :key="i" @click="menuItem.action(currentVideo,$event)">
                          <v-list-tile-avatar>
                            <v-icon>{{ menuItem.icon }}</v-icon>
                          </v-list-tile-avatar>
                          <v-list-tile-title>
                            {{ menuItem.text }}
                          </v-list-tile-title>
                        </v-list-tile>
                      </template>
                    </v-list>
                  </v-menu>

                </div>


              </v-toolbar>
            </v-list-tile>

            <v-divider></v-divider>

            <v-expand-transition>

              <v-list-tile v-if='infoPanel'>
                <v-list-tile-content>
                  上传时间：一堆无意义的文字
                </v-list-tile-content>
              </v-list-tile>
            </v-expand-transition>

            <v-fade-transition>
              <v-divider v-if='infoPanel'></v-divider>
            </v-fade-transition>

          </v-list>





          <v-container id="scroll-target" class="scrollContainer">
            <v-layout v-scroll:#scroll-target="" mx-2 column align-center justify-center>
              一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字一堆无意义的文字
            </v-layout>
          </v-container>



        </v-card>

      </v-dialog>



      <v-content>



        <v-expand-transition>
          <v-tabs v-model="tabs" v-if='mainList.results.length!=0' centered color="transparent" slider-color="primary"
            :show-arrows='showArrow'>

            <v-tab v-for="n in typeList" :key='typeList.text'>
              <v-badge overlap>
                <span slot="badge" class="caption">99</span>
                <v-chip>
                  <v-flex>
                    <v-icon :size='n.size'>{{n.icon}}</v-icon>
                  </v-flex>
                  <v-flex ml-1>{{n.text}}</v-flex>
                </v-chip>
              </v-badge>
            </v-tab>

          </v-tabs>
        </v-expand-transition>

        <v-slide-y-transition>
          <v-subheader class='caption' v-if='(mainList.results.length!=0)&&(keywordLasttime!="")'>
            找到有关『{{keywordLasttime}}』的{{mainList.results.length}}条结果（用时{{searchDuration}}秒）
          </v-subheader>
        </v-slide-y-transition>

        <v-slide-y-transition>
          <v-layout align-center justify-center v-if='mainList.results.length!=0'>
            <v-flex xs12 mb-5>
              <v-card>
                <v-list two-line>

                  <template v-for="(result, index) in mainList.results">

                    <v-list-tile :key="result.attributes.title" avatar ripple @click=""
                      @contextmenu="rightClick(index,$event)">
                      <v-badge :color="canPlay(result).color" left overlap>
                        <!-- <v-icon slot="badge" dark small>done</v-icon> -->
                        <v-icon v-if='canPlay(result)' color="white" slot="badge">{{canPlay(result).icon}}</v-icon>
                        <v-list-tile-avatar ripple @click="">

                          <v-btn v-if='result.attributes.icon!=undefined' :class="result.attributes.iconClass" small
                            fab>
                            <v-icon>{{ result.attributes.icon }}</v-icon>
                          </v-btn>
                          <v-btn v-else class="grey lighten-1 white--text caption" small fab>
                            <div>{{ result.attributes.suffix }}</div>
                          </v-btn>

                        </v-list-tile-avatar>
                      </v-badge>





                      <v-list-tile-content @click="howToPlay(result)">

                        <v-list-tile-title class="font-weight-bold subheading">{{ result.attributes.name }}
                        </v-list-tile-title>
                        <v-list-tile-sub-title class="body-2 font-weight-regular text--gray"
                          v-if="result.attributes.name !== result.attributes.name_trans">
                          {{ result.attributes.name_trans }}</v-list-tile-sub-title>
                        <v-list-tile-sub-title class="caption font-weight-light" v-if="result.attributes.size">
                          {{ renderSize(result.attributes.size) }}</v-list-tile-sub-title>
                      </v-list-tile-content>



                      <v-list-tile-action>
                        <v-btn icon ripple @click="rightClick(index,$event)">
                          <v-icon color="grey lighten-1">more_horiz</v-icon>
                        </v-btn>
                      </v-list-tile-action>

                      <v-menu v-model="showMenu" v-if="index==showMenuIndex" :position-x="MenuX" :position-y="MenuY"
                        absolute offset-y>
                        <v-list>
                          <v-list-tile v-for="(menuItem, i) in bottomSheetToolbar" :key="i"
                            @click="menuItem.action(result,$event)" :name="menuItem.name"
                            :copyContent='result.attributes.copyContent'>
                            <v-list-tile-avatar>
                              <v-icon>{{ menuItem.icon }}</v-icon>
                            </v-list-tile-avatar>
                            <v-list-tile-title>{{ menuItem.text }}</v-list-tile-title>
                          </v-list-tile>
                        </v-list>
                      </v-menu>


                    </v-list-tile>
                    <v-divider v-if="index + 1 < mainList.results.length" :key="index" inset></v-divider>




                  </template>

                  <!--                   <v-menu v-model='showMenu' :position-x="MenuX" :position-y="MenuY" absolute offset-y>
                    <v-btn slot="activator" icon ripple>
                      <v-icon color="grey lighten-1">more_horiz</v-icon>
                    </v-btn>
                    <v-list>
                      <v-list-tile v-for="(menuItem, i) in bottomSheetToolbar" :key="i" :name="menuItem.name">
                        <v-list-tile-avatar>
                          <v-icon>{{ menuItem.icon }}</v-icon>
                        </v-list-tile-avatar>
                        <v-list-tile-title>{{ menuItem.text }}</v-list-tile-title>
                      </v-list-tile>
                    </v-list>
                  </v-menu> -->


                </v-list>
              </v-card>
            </v-flex>






          </v-layout>
        </v-slide-y-transition>



      </v-content>

      <v-layout row>
        <v-flex xs12 sm6 offset-sm3>
          <v-card>



          </v-card>
        </v-flex>
      </v-layout>

      <v-footer :inset="footer.inset">

        <span class="px-3">&copy; {{ new Date().getFullYear() }}</span>

      </v-footer>


      <v-dialog v-model="deleteConfirmDialog" max-width="290">

        <v-card>
          <v-card-title class="headline red--text">确定要删除该项?</v-card-title>

          <v-card-text>
            删除操作不可撤回，请谨慎考虑。
          </v-card-text>

          <v-card-actions>
            <v-spacer></v-spacer>

            <v-btn color="primary" flat="flat" @click="deleteConfirmDialog = false">
              取消
            </v-btn>

            <v-btn color="error" @click="deleteConfirmDialog = false;deleteContent(deleteOjbect)">
              删除
            </v-btn>
          </v-card-actions>
        </v-card>
      </v-dialog>




    </v-app>


    <v-flex v-scroll="occurFab" v-cloak>

      <v-fab-transition>
        <v-speed-dial slot="activator" v-show="floatBTN_Occur" v-model="fab" :top="top" :bottom="bottom" :right="right"
          :left="left" :direction="direction" :open-on-hover="hover" :transition="transition" fixed>

          <v-btn slot="activator" v-model="fab" :color="activeFab.color" dark fab>
            <v-icon>{{ activeFab.icon }}</v-icon>
          </v-btn>
          <v-btn fab dark small color="orange" @click="$vuetify.goTo(0);">
            <v-icon>keyboard_arrow_up</v-icon>
          </v-btn>
          <v-btn fab dark small color="indigo">
            <v-icon>add</v-icon>
          </v-btn>
          <v-btn fab dark small color="green" @click="hoverOrNot;backToSearchTarget;">
            <v-icon>search</v-icon>
          </v-btn>
        </v-speed-dial>
      </v-fab-transition>

    </v-flex>


  </v-flex>

  <!--   <v-flex id="floatBTN" v-scroll="occurFab" v-cloak>

    <v-fab-transition>
      <v-speed-dial slot="activator" v-show="floatBTN_Occur" v-model="fab" :top="top" :bottom="bottom" :right="right"
        :left="left" :direction="direction" :open-on-hover="hover" :transition="transition" fixed>

        <v-btn slot="activator" v-model="fab" :color="activeFab.color" dark fab>
          <v-icon>{{ activeFab.icon }}</v-icon>
        </v-btn>
        <v-btn fab dark small color="orange" @click="$vuetify.goTo(0);">
          <v-icon>keyboard_arrow_up</v-icon>
        </v-btn>
        <v-btn fab dark small color="indigo">
          <v-icon>add</v-icon>
        </v-btn>
        <v-btn fab dark small color="green" @click="hoverOrNot;backToSearchTarget;">
          <v-icon>search</v-icon>
        </v-btn>
      </v-speed-dial>
    </v-fab-transition>

  </v-flex> -->






</body>

<script src='https://cdn.jsdelivr.net/npm/vue/dist/vue.js'></script>
<script src='https://cdn.jsdelivr.net/npm/vuetify/dist/vuetify.js'></script>
<script>Vue.config.productionTip = false;</script>
<!-- 关掉那句vue开发模式提醒的话 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/flv.js/1.5.0/flv.min.js"></script> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/dplayer/1.25.0/DPlayer.min.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
  crossorigin="anonymous"></script>
<script src="//cdn.jsdelivr.net/npm/leancloud-storage@3.11.1/dist/av-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>

<script src="js/leanCloudInit.js"></script>
<script src="js/searchShimo.js"></script>
<script src="js/index.js"></script>


<script>

</script>

</html>